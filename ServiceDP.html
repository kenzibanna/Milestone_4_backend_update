<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="chatbot.css">

  <meta charset="UTF-8">
  <title>Our Services â€“ Smile Clinic</title>
  <link rel="stylesheet" href="DentalProject.css">
</head>

<body>

<nav class="navbar">
  <div class="logo">SMILE CLINIC </div>
  <ul class="nav-links">
    <li><a href="index.html">Home </a></li>
    <li><a href="DoctorsDP.html">Our Doctors </a></li>
    <li><a href="ServiceDP.html">Our Services </a></li>
    <li><a href="EmergencyDP.html" class="emergency-btn">Emergency </a></li>
    <li><a href="BookingDP.html">Book Now </a></li>
	<li><a href="HistoryDP.html">Patient History </a></li>
  </ul>
</nav>

<section class="services-page">
  <h1> Our Services</h1>

  <div class="interactive-services" id="services-container">
    <p style="text-align: center; padding: 40px;">Loading services...</p>
  </div>
</section>

<script>
function getApiBase() {
  const origin = window.location.origin;
  if (origin.startsWith('file:')) return 'http://localhost:3000/api';
  return `${origin.replace(/\/$/, '')}/api`;
}
const API_URL = getApiBase();

async function loadServices() {
  try {
    const response = await fetch(`${API_URL}/services`);
    const result = await response.json();
    
    const container = document.getElementById('services-container');
    
    if (result.success && result.data.services) {
      const services = result.data.services;
      
      if (services.length === 0) {
        container.innerHTML = '<p style="text-align: center; padding: 40px;">No services available.</p>';
        return;
      }
      
      container.innerHTML = services.map(service => `
        <div class="card">
          <h2>${service.name}</h2>
          <p>${service.description || 'Professional dental service'}</p>
          ${service.category === 'Emergency' 
            ? `<a href="EmergencyDP.html?service=${service._id}" class="book-btn">Emergency</a>`
            : `<a href="BookingDP.html?service=${service._id}" class="book-btn">Book Now</a>`
          }
        </div>
      `).join('');
    } else {
      container.innerHTML = '<p style="text-align: center; padding: 40px;">Error loading services.</p>';
    }
  } catch (error) {
    console.error('Error loading services:', error);
    document.getElementById('services-container').innerHTML = 
      '<p style="text-align: center; padding: 40px;">Error loading services. Please refresh the page.</p>';
  }
}

// Load services when page loads
loadServices();
</script>
<script src="inject-chatbot.js"></script>
<!-- Chatbot Widget -->
<div id="chatbot-icon">ðŸ’¬</div>

<div id="chatbot-window">
    <div class="chatbot-header">Smile Dental Support</div>
    <div class="chatbot-messages"></div>
    <div class="chatbot-input">
        <input type="text" id="chatbot-text" placeholder="Type your message...">
        <button id="chatbot-send">Send</button>
    </div>
</div>

<script src="chatbot.js"></script>
<script src="inject-chatbot.js"></script>

</body>
</html>
